<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Neon Fusion NFT Generator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 25%, #16213e 50%, #2d1b69 75%, #0f0f23 100%);
            min-height: 100vh;
            padding: 2rem;
            color: white;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Animated background particles */
        .bg-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #c9e265, #89d957);
            border-radius: 50%;
            animation: float 6s infinite linear;
        }
        
        @keyframes float {
            0% { transform: translateY(100vh) translateX(-50px); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) translateX(50px); opacity: 0; }
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .title {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #c9e265, #89d957, #ffff00, #00ff00);
            background-size: 400% 400%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
            animation: gradientShift 3s ease-in-out infinite;
            text-shadow: 0 0 30px rgba(201, 226, 101, 0.5);
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #94a3b8;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px rgba(148, 163, 184, 0.3);
        }
        
        .controls-section {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.1);
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .input-group {
            margin-bottom: 1rem;
        }
        
        .label {
            display: block;
            font-size: 0.9rem;
            color: #00ffff;
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .input, .select {
            width: 100%;
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 0, 255, 0.3);
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: white;
            transition: all 0.3s ease;
        }
        
        .input:focus, .select:focus {
            outline: none;
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        
        .generate-btn {
            background: linear-gradient(45deg, #ff00ff, #00ffff, #c9e265, #89d957);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-family: 'Orbitron', monospace;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .generate-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .generate-btn:hover::before {
            left: 100%;
        }
        
        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(201, 226, 101, 0.4);
        }
        
        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }
        
        .pixel-nft-card {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 2px solid;
            border-radius: 24px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            height: 700px;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
            isolation: isolate;
        }
        
        .pixel-nft-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            animation: borderGlow 2s ease-in-out infinite alternate;
        }
        
        .pixel-nft-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            z-index: -1;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes borderGlow {
            from { box-shadow: 0 0 20px rgba(0, 255, 255, 0.5); }
            to { box-shadow: 0 0 40px rgba(255, 0, 255, 0.7); }
        }
        
        .pixel-nft-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 255, 255, 0.3);
        }
        
        /* Style variations */
        .neon-ramen {
            border-color: #ff4444;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.9) 0%, rgba(45, 24, 16, 0.9) 50%);
        }
        
        .neon-ramen::before {
            background: linear-gradient(90deg, #ff4444, #ffaa00, #ff6666);
        }
        
        .neon-marina {
            border-color: #00ffff;
            background: linear-gradient(135deg, rgba(10, 25, 41, 0.9) 0%, rgba(30, 41, 59, 0.9) 50%);
        }
        
        .neon-marina::before {
            background: linear-gradient(90deg, #00ffff, #0ea5e9, #8b5cf6);
        }
        
        .neon-hawker {
            border-color: #ffaa00;
            background: linear-gradient(135deg, rgba(74, 55, 40, 0.9) 0%, rgba(107, 78, 61, 0.9) 50%);
        }
        
        .neon-hawker::before {
            background: linear-gradient(90deg, #ff8c42, #ffcc02, #ff6b35);
        }
        
        .neon-party {
            border-color: #ff00ff;
            background: linear-gradient(135deg, rgba(26, 0, 51, 0.9) 0%, rgba(45, 10, 78, 0.9) 50%);
        }
        
        .neon-party::before {
            background: linear-gradient(90deg, #ff00ff, #00ffff, #ffff00);
        }
        
        .card-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .pixel-scene {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(26, 10, 46, 0.8) 50%, rgba(22, 33, 62, 0.8) 100%);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(0, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .scene-canvas {
            width: calc(100% - 4px);
            height: calc(100% - 4px);
            border-radius: 10px;
            position: absolute;
            top: 2px;
            left: 2px;
        }
        
        .pixel-avatars {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        .pixel-avatar {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }
        
        .avatar-canvas {
            width: 64px;
            height: 64px;
            border-radius: 8px;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            margin-bottom: 0.5rem;
            border: 2px solid rgba(0, 255, 255, 0.3);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .avatar-canvas:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(255, 0, 255, 0.4);
        }
        
        .avatar-name {
            font-size: 0.7rem;
            color: #00ffff;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .avatar-amount {
            font-size: 0.6rem;
            color: #ffaa00;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .total-amount {
            text-align: center;
            margin: 2rem 0;
        }
        
        .amount-display {
            font-size: 2.5rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(45deg, #00ffff, #ff00ff, #c9e265, #89d957);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(137, 217, 87, 0.5);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .currency {
            font-size: 1rem;
            color: #94a3b8;
            margin-left: 0.5rem;
        }
        
        .nft-metadata {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }
        
        .metadata-title {
            font-size: 0.8rem;
            color: #00ffff;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }
        
        .metadata-content {
            font-size: 0.75rem;
            color: #94a3b8;
            line-height: 1.4;
        }
        

        
        @media (max-width: 768px) {
            .nft-grid {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .pixel-nft-card {
                height: auto;
                min-height: 600px;
            }
        }
    </style>
</head>
<body>
    <div class="bg-particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">PIXEL NEON FUSION</h1>
            <p class="subtitle">Next-gen NFT dining experiences • Pixel avatars meet cyberpunk aesthetics</p>
        </div>
        
        <div class="controls-section">
            <div class="controls-grid">
                <div>
                    <div class="input-group">
                        <label class="label" for="participants">Participants</label>
                        <input type="text" id="participants" class="input" 
                               placeholder="alice.base, bob.base, charlie.base" 
                               value="cyber.alice, neon.bob, pixel.charlie">
                    </div>
                </div>
                
                <div>
                    <div class="input-group">
                        <label class="label" for="location">Location Scene</label>
                        <select id="location" class="select">
                            <option value="ramen">🍜 Cyber Ramen District</option>
                            <option value="marina">🏙️ Neo Marina Towers</option>
                            <option value="hawker">🍛 Digital Food Court</option>
                            <option value="rooftop">🌃 Hologram Rooftop</option>
                        </select>
                    </div>
                </div>
                
                <div>
                    <div class="input-group">
                        <label class="label" for="timeOfDay">Time Cycle</label>
                        <select id="timeOfDay" class="select">
                            <option value="evening">Evening Glow</option>
                            <option value="night">Neon Night</option>
                            <option value="latenight">Deep Cyber</option>
                            <option value="morning">Dawn Matrix</option>
                        </select>
                    </div>
                </div>
                
                <div>
                    <div class="input-group">
                        <label class="label" for="amount">Total (USDC)</label>
                        <input type="number" id="amount" class="input" placeholder="125.00" value="247.50">
                    </div>
                    <button class="generate-btn" onclick="generatePixelNeon()">
                        Generate Pixel NFT
                    </button>
                </div>
            </div>
        </div>
        
        <div class="nft-grid" id="nftGrid">
            <!-- Generated NFTs will appear here -->
        </div>
    </div>

    <script>
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (6 + Math.random() * 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        // Enhanced hash function
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash);
        }
        
        // Extract cyberpunk traits
        function extractCyberTraits(hash) {
            return {
                bgHue: hash % 360,
                skinHue: (hash >> 4) % 60 + 15,
                hairHue: (hash >> 8) % 360,
                eyeHue: (hash >> 12) % 360,
                cyberware: (hash >> 16) % 4, // 0=none, 1=visor, 2=implants, 3=full-cyber
                glowColor: `hsl(${(hash >> 20) % 360}, 100%, 60%)`,
                aura: (hash >> 24) % 5, // 0=blue, 1=pink, 2=green, 3=lime, 4=yellow-green
                expression: hash % 4,
                accessories: (hash >> 18) % 8
            };
        }
        
        // Generate cyberpunk pixel avatar
        function generateCyberAvatar(basename, size = 64) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            ctx.imageSmoothingEnabled = false;
            
            const hash = simpleHash(basename);
            const traits = extractCyberTraits(hash);
            const pixelSize = size / 16;
            
            // Cyberpunk color palette with new greens
            const auraColors = ['#00ffff', '#ff00ff', '#00ff00', '#c9e265', '#89d957'];
            const skinTones = ['#ffdbac', '#f1c27d', '#e0ac69', '#c68642', '#8d5524'];
            
            const bgColor = auraColors[traits.aura];
            const skinColor = skinTones[hash % skinTones.length];
            const hairColor = `hsl(${traits.hairHue}, 70%, 40%)`;
            const eyeColor = `hsl(${traits.eyeHue}, 100%, 60%)`;
            const glowColor = traits.glowColor;
            
            // Create glow effect background
            const gradient = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
            gradient.addColorStop(0, bgColor + '40');
            gradient.addColorStop(0.7, bgColor + '20');
            gradient.addColorStop(1, bgColor + '10');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, size, size);
            
            // Base avatar pattern with cyberpunk modifications
            const avatarPattern = [
                '0000000000000000',
                '0000111111110000',
                '0001111111111000',
                '0011111111111100',
                '0111111111111110',
                '0111122112211110', // eyes with cyber mods
                '0111111111111110',
                '0111111111111110',
                '0111111331111110', // mouth/cyber jaw
                '0111111111111110',
                '0011111111111100',
                '0001111111111000',
                '0000111111110000',
                '0000044444440000', // cyber collar
                '0000044444440000',
                '0000000000000000'
            ];
            
            // Modify pattern based on traits
            let modifiedPattern = [...avatarPattern];
            
            // Add cyberware
            if (traits.cyberware >= 1) {
                modifiedPattern[5] = '0111155115511110'; // Cyber visor
                modifiedPattern[6] = '0111155115511110';
            }
            
            if (traits.cyberware >= 2) {
                modifiedPattern[8] = '0111166666661110'; // Cyber jaw
                modifiedPattern[9] = '0111166616661110';
            }
            
            if (traits.cyberware >= 3) {
                modifiedPattern[4] = '0777111111111777'; // Full cyber temples
                modifiedPattern[10] = '0777111111111777';
            }
            
            // Color mapping with cyber elements
            const colors = {
                '0': 'transparent',
                '1': skinColor,
                '2': eyeColor,
                '3': hairColor,
                '4': glowColor,
                '5': '#000080', // Cyber visor
                '6': '#c0c0c0', // Cyber jaw
                '7': glowColor   // Cyber glow
            };
            
            // Draw base avatar
            for (let y = 0; y < 16; y++) {
                for (let x = 0; x < 16; x++) {
                    const pixelType = modifiedPattern[y][x];
                    if (pixelType !== '0') {
                        ctx.fillStyle = colors[pixelType];
                        ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);
                        
                        // Add glow to cyber elements
                        if (pixelType === '4' || pixelType === '7') {
                            ctx.shadowColor = colors[pixelType];
                            ctx.shadowBlur = 10;
                            ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);
                            ctx.shadowBlur = 0;
                        }
                    }
                }
            }
            
            // Add holographic effects
            if (traits.accessories >= 4) {
                ctx.fillStyle = glowColor + '80';
                for (let i = 0; i < 8; i++) {
                    const x = Math.random() * size;
                    const y = Math.random() * size;
                    ctx.fillRect(x, y, 1, 1);
                }
            }
            
            return canvas.toDataURL();
        }
        
        // Generate modern cyberpunk scene (non-pixelated)
        function generateCyberScene(locationType, timeOfDay) {
            const canvas = document.createElement('canvas');
            canvas.width = 400;
            canvas.height = 200;
            const ctx = canvas.getContext('2d');
            
            // Cyberpunk time-based palettes with new greens
            const timePalettes = {
                morning: ['#ff6b35', '#f7931e', '#c9e265'],
                evening: ['#ff00ff', '#00ffff', '#89d957'],
                night: ['#0066ff', '#9900ff', '#c9e265'],
                latenight: ['#ff0080', '#8000ff', '#89d957']
            };
            
            const palette = timePalettes[timeOfDay] || timePalettes.night;
            
            // Smooth gradient background
            const gradient = ctx.createLinearGradient(0, 0, 400, 200);
            gradient.addColorStop(0, '#000011');
            gradient.addColorStop(0.3, '#001122');
            gradient.addColorStop(0.7, '#112233');
            gradient.addColorStop(1, '#000033');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 200);
            
            // Add atmospheric effects
            const atmosGradient = ctx.createRadialGradient(200, 100, 0, 200, 100, 300);
            atmosGradient.addColorStop(0, palette[0] + '20');
            atmosGradient.addColorStop(0.5, palette[1] + '15');
            atmosGradient.addColorStop(1, palette[2] + '10');
            ctx.fillStyle = atmosGradient;
            ctx.fillRect(0, 0, 400, 200);
            
            // Draw modern location elements
            drawModernElements(ctx, locationType, palette);
            
            // Add particle effects
            for (let i = 0; i < 15; i++) {
                const x = Math.random() * 400;
                const y = Math.random() * 200;
                const size = Math.random() * 3 + 1;
                const color = palette[Math.floor(Math.random() * palette.length)];
                
                ctx.fillStyle = color + '80';
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
                
                // Add glow
                ctx.shadowColor = color;
                ctx.shadowBlur = 10;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            }
            
            return canvas.toDataURL();
        }
        
        function drawModernElements(ctx, locationType, palette) {
            ctx.lineWidth = 2;
            
            switch(locationType) {
                case 'ramen':
                    // Modern ramen shop with glowing signs
                    // Building silhouette
                    ctx.fillStyle = 'rgba(40, 40, 60, 0.8)';
                    ctx.fillRect(80, 100, 240, 100);
                    
                    // Glowing neon sign
                    ctx.strokeStyle = palette[0];
                    ctx.lineWidth = 4;
                    ctx.shadowColor = palette[0];
                    ctx.shadowBlur = 20;
                    ctx.strokeRect(120, 80, 160, 40);
                    ctx.shadowBlur = 0;
                    
                    // Window glow
                    const windowGrad = ctx.createLinearGradient(120, 130, 280, 170);
                    windowGrad.addColorStop(0, palette[1] + '60');
                    windowGrad.addColorStop(1, 'transparent');
                    ctx.fillStyle = windowGrad;
                    ctx.fillRect(120, 130, 160, 40);
                    
                    // Steam effects
                    for(let i = 0; i < 8; i++) {
                        ctx.fillStyle = palette[2] + '40';
                        ctx.beginPath();
                        ctx.arc(140 + i*20, 60 - i*3, 3, 0, Math.PI * 2);
                        ctx.fill();
                    }
                    break;
                    
                case 'marina':
                    // Modern towers with light effects
                    for (let i = 0; i < 5; i++) {
                        const height = 80 + Math.random() * 100;
                        const x = 60 + i * 60;
                        const width = 40 + Math.random() * 20;
                        
                        // Building gradient
                        const buildingGrad = ctx.createLinearGradient(x, 200-height, x, 200);
                        buildingGrad.addColorStop(0, 'rgba(30, 30, 50, 0.9)');
                        buildingGrad.addColorStop(1, 'rgba(60, 60, 80, 0.9)');
                        ctx.fillStyle = buildingGrad;
                        ctx.fillRect(x, 200 - height, width, height);
                        
                        // Neon accent lines
                        ctx.strokeStyle = palette[i % palette.length];
                        ctx.lineWidth = 2;
                        ctx.shadowColor = palette[i % palette.length];
                        ctx.shadowBlur = 15;
                        ctx.beginPath();
                        ctx.moveTo(x, 200 - height);
                        ctx.lineTo(x + width, 200 - height);
                        ctx.stroke();
                        ctx.shadowBlur = 0;
                        
                        // Window lights
                        for (let floor = 0; floor < height/12; floor++) {
                            if (Math.random() > 0.4) {
                                ctx.fillStyle = palette[Math.floor(Math.random() * palette.length)] + '80';
                                ctx.fillRect(x + 8, 200 - height + floor*12, width-16, 8);
                            }
                        }
                    }
                    break;
                    
                case 'hawker':
                    // Modern food court with ambient lighting
                    // Base structure
                    ctx.fillStyle = 'rgba(80, 60, 40, 0.8)';
                    ctx.fillRect(50, 140, 300, 60);
                    
                    // Overhead lighting strips
                    for (let i = 0; i < 6; i++) {
                        const x = 70 + i * 50;
                        ctx.fillStyle = palette[i % palette.length] + '60';
                        ctx.fillRect(x, 120, 40, 20);
                        
                        // Light beam effect
                        const lightGrad = ctx.createLinearGradient(x+20, 140, x+20, 180);
                        lightGrad.addColorStop(0, palette[i % palette.length] + '40');
                        lightGrad.addColorStop(1, 'transparent');
                        ctx.fillStyle = lightGrad;
                        ctx.fillRect(x+10, 140, 20, 40);
                    }
                    break;
                    
                case 'rooftop':
                    // Holographic sky bar
                    // Floor platform
                    ctx.fillStyle = 'rgba(40, 40, 60, 0.9)';
                    ctx.fillRect(0, 160, 400, 40);
                    
                    // Floating holo-platforms with glow
                    for (let i = 0; i < 4; i++) {
                        const x = 80 + i * 80;
                        const y = 120 - i * 8;
                        
                        // Platform glow
                        ctx.shadowColor = palette[i % palette.length];
                        ctx.shadowBlur = 25;
                        ctx.fillStyle = palette[i % palette.length] + '60';
                        ctx.fillRect(x, y, 60, 15);
                        ctx.shadowBlur = 0;
                        
                        // Platform solid
                        ctx.fillStyle = 'rgba(100, 100, 120, 0.8)';
                        ctx.fillRect(x, y, 60, 15);
                    }
                    
                    // City skyline silhouette
                    for (let i = 0; i < 10; i++) {
                        const height = 40 + Math.random() * 80;
                        const x = i * 40;
                        ctx.fillStyle = 'rgba(20, 20, 40, 0.7)';
                        ctx.fillRect(x, 160 - height, 35, height);
                        
                        // Random window lights
                        if (Math.random() > 0.6) {
                            ctx.fillStyle = palette[Math.floor(Math.random() * palette.length)] + '80';
                            ctx.fillRect(x + 10, 160 - height + 20, 15, 10);
                        }
                    }
                    break;
            }
        }
        
        function getLocationStyle(location) {
            const styles = {
                ramen: 'neon-ramen',
                marina: 'neon-marina', 
                hawker: 'neon-hawker',
                rooftop: 'neon-party'
            };
            return styles[location] || 'neon-party';
        }
        
        function getLocationName(location) {
            const names = {
                ramen: 'Cyber Ramen District',
                marina: 'Neo Marina Towers',
                hawker: 'Digital Food Court',
                rooftop: 'Hologram Rooftop'
            };
            return names[location] || 'Cyber Space';
        }
        
        function getRarityLevel(amount, participants) {
            const avgAmount = amount / participants;
            if (avgAmount > 100) return 'LEGENDARY';
            if (avgAmount > 50) return 'EPIC';
            if (avgAmount > 25) return 'RARE';
            return 'COMMON';
        }
        
        // Main generation function
        function generatePixelNeon() {
            const participantsInput = document.getElementById('participants').value;
            const location = document.getElementById('location').value;
            const timeOfDay = document.getElementById('timeOfDay').value;
            const amount = parseFloat(document.getElementById('amount').value) || 247.50;
            
            const participants = participantsInput.split(',').map(p => p.trim()).filter(p => p);
            
            const grid = document.getElementById('nftGrid');
            grid.innerHTML = '';
            
            // Generate scene
            const sceneCanvas = generateCyberScene(location, timeOfDay);
            
            // Generate avatars
            const avatars = participants.map(p => ({
                basename: p,
                avatar: generateCyberAvatar(p, 64),
                amount: (amount / participants.length).toFixed(2)
            }));
            
            const rarity = getRarityLevel(amount, participants.length);
            const locationStyle = getLocationStyle(location);
            const locationName = getLocationName(location);
            
            // Create NFT card
            const card = document.createElement('div');
            card.className = `pixel-nft-card ${locationStyle}`;
            card.innerHTML = `
                <div class="card-header">
                    <div class="pixel-scene">
                        <img src="${sceneCanvas}" class="scene-canvas" alt="${locationName}">
                    </div>
                    
                    <h3 style="font-size: 1.4rem; color: #00ffff; margin-bottom: 0.5rem; text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);">
                        ${locationName}
                    </h3>
                    <p style="font-size: 0.9rem; color: #ff00ff; text-shadow: 0 0 10px rgba(255, 0, 255, 0.3);">
                        📍 Neo-Singapore • ${timeOfDay.toUpperCase()} CYCLE
                    </p>
                    <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; color: #ffaa00; margin-top: 0.5rem;">
                        NFT #${Math.floor(Math.random() * 9999)} • ${new Date().toLocaleDateString()}
                    </div>
                </div>
                
                <div class="total-amount">
                    <div class="amount-display">${amount}</div>
                    <span class="currency">USDC</span>
                </div>
                
                <div class="pixel-avatars">
                    ${avatars.map(a => `
                        <div class="pixel-avatar">
                            <img src="${a.avatar}" class="avatar-canvas" alt="${a.basename}">
                            <div class="avatar-name">${a.basename}</div>
                            <div class="avatar-amount">${a.amount}</div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="text-align: center; margin: 1.5rem 0; font-size: 0.9rem; color: #00ff00; text-shadow: 0 0 15px rgba(0, 255, 0, 0.3);">
                    🧑‍🤝‍🧑 ${participants.length} cyber-friends • ${timeOfDay} vibes
                </div>
                

                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(0, 255, 255, 0.2); font-size: 0.7rem;">
                    <span style="color: #00ffff;">SplitBase</span>
                    <span style="color: #00ff00;">✓ MINTED</span>
                </div>
            `;
            
            grid.appendChild(card);
            
            // Add entrance animation
            setTimeout(() => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(50px)';
                card.style.transition = 'all 0.8s ease';
                
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 100);
            }, 0);
        }
        
        // Initialize
        createParticles();
        generatePixelNeon();
        
        // Auto-regenerate every 10 seconds for demo
        setInterval(() => {
            const participants = ['cyber.alice', 'neon.bob', 'pixel.charlie', 'matrix.diana', 'holo.eve'];
            const locations = ['ramen', 'marina', 'hawker', 'rooftop'];
            const times = ['evening', 'night', 'latenight'];
            
            // Randomize inputs
            document.getElementById('participants').value = participants.slice(0, 2 + Math.floor(Math.random() * 3)).join(', ');
            document.getElementById('location').value = locations[Math.floor(Math.random() * locations.length)];
            document.getElementById('timeOfDay').value = times[Math.floor(Math.random() * times.length)];
            document.getElementById('amount').value = (50 + Math.random() * 300).toFixed(2);
            
            generatePixelNeon();
        }, 15000);
    </script>
</body>
</html>